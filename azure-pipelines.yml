trigger:
  branches:
    include:
      - develop

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: UsePythonVersion@4
  inputs:
    versionSpec: '3.x'

- task: SonarQubePrepare@4
  inputs:
    SonarQube: '<SonarQube Connection>'
    projectKey: 'YourProjectKey'
    projectName: 'YourProjectName'

- script: |
    python -m unittest
    sonar-scanner
  displayName: 'Run Tests and SonarQube Scan'

- task: PublishBuildArtifacts@4
  inputs:
    artifactName: 'drop'
    targetPath: '$(System.DefaultWorkingDirectory)'
